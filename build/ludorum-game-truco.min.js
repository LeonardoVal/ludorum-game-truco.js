//! ludorum-game-truco 0.0.1

(function(e){"use strict";"function"==typeof define&&define.amd?define(["creatartis-base","sermat","ludorum"],e):"object"==typeof exports&&module.exports?module.exports=e(require("creatartis-base"),require("sermat"),require("ludorum")):this["ludorum-game-truco"]=e(this.base,this.Sermat,this.ludorum)}).call(this,function e(t,r,a){"use strict";var i=t.declare,n=(t.raise,t.raiseIf,t.Iterable,t.iterable,a.Game),s=(a.players.UserInterface,{__package__:"ludorum-game-truco",__name__:"ludorum_game_truco",__init__:e,__dependencies__:[t,r,a],__SERMAT__:{include:[t,a]},ai:{}});function l(e){for(var t=[],r=0;r<e.length;r++)t.push(r);return t}var u=s.Truco=i(n,{name:"Truco",constructor:function(e){n.call(this,e)},players:["Hand","Foot"],moves:function(){return null},result:function(){return null},next:function(e,t,r){return null},"static __SERMAT__":{identifier:s.__package__+".Truco",serializer:function(e){return[e.activePlayer()]}}});s.__SERMAT__.include.push(u),r.include(s);var c=s.ai.SubTruco=i(n,{name:"Truco",constructor:function(e,t,r){n.call(this,e),this.table=[],this.cardsHand=t,this.cardsFoot=r,this.winner=null,this.result_parcial=[]},players:["Hand","Foot"],moves:function(){if(this.result())return null;var e={};return"Hand"===this.activePlayer()?e[this.activePlayer()]=l(this.cardsHand):e[this.activePlayer()]=l(this.cardsFoot),e},result:function(){return this.winner?this.victory(this.winner):null},clone:function(){var e=new c(this.activePlayer(),this.cardsHand.slice(),this.cardsFoot.slice());return e.table=this.table.slice(),e.winner=this.winner,e.result_parcial=this.result_parcial.slice(),e},next:function(e,t,r){var a,i=r?this:this.clone(),n=e[this.activePlayer()];if("Hand"===i.activePlayer())a=i.cardsHand[n],i.cardsHand.splice(n,1),i.table.push(a);else{switch(a=i.cardsFoot[n],i.cardsFoot.splice(n,1),i.table.push(a),i.cardsFoot.length){case 2:i.result_parcial[0]=i.table[0]>i.table[1]?1:-1;break;case 1:i.result_parcial[1]=i.table[2]>i.table[3]?1:-1;break;case 0:i.result_parcial[2]=i.table[4]>i.table[5]?1:-1}i.winner=i.partialWinner()}var s="Hand"===i.activePlayer()?"Foot":"Hand";return i.activatePlayers(s),i},partialWinner:function(){var e=this.result_parcial;if(1<e.length)if(2==e.length){if(e==[1,1]||e==[0,1]||e==[1,0])return"Hand";if(e==[-1,-1]||e==[0,-1]||e==[-1,0])return"Foot"}else{if(e==[1,-1,1]||e==[1,-1,0]||e==[0,0,0]||e==[0,0,1])return"Hand";if(e==[-1,1,-1]||e==[-1,1,0]||e==[0,0,-1])return"Foot"}return null},"static __SERMAT__":{identifier:s.__package__+".SubTruco",serializer:function(e){return[e.activePlayer()]}}});return s.__SERMAT__.include.push(c),r.include(s),r.include(s),s});
//# sourceMappingURL=ludorum-game-truco.min.js.map