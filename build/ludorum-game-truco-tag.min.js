//! ludorum-game-truco 0.0.1

(function(r){"use strict";this["ludorum-game-truco"]=r(this.base,this.Sermat,this.ludorum)}).call(this,function r(t,e,a){"use strict";var i=t.declare,s=(t.raise,t.raiseIf,t.Iterable,t.iterable,a.Game),l=(a.players.UserInterface,{__package__:"ludorum-game-truco",__name__:"ludorum_game_truco",__init__:r,__dependencies__:[t,e,a],__SERMAT__:{include:[t,a]},ai:{}});function n(r){for(var t=[],e=0;e<r.length;e++)t.push(e);return t}var c=l.Truco=i(s,{name:"Truco",constructor:function(r){s.call(this,r)},players:["Hand","Foot"],moves:function(){return null},result:function(){return null},next:function(r,t,e){return null},"static __SERMAT__":{identifier:l.__package__+".Truco",serializer:function(r){return[r.activePlayer()]}}});l.__SERMAT__.include.push(c),e.include(l);var u=l.ai.SubTruco=i(s,{name:"Truco",constructor:function(r,t,e){s.call(this,r),this.table=[],this.cardsHand=t,this.cardsFoot=e,this.winner=null,this.result_parcial=[]},players:["Hand","Foot"],moves:function(){if(this.result())return null;var r={};return"Hand"===this.activePlayer()?r[this.activePlayer()]=n(this.cardsHand):r[this.activePlayer()]=n(this.cardsFoot),r},result:function(){return this.winner?this.victory(this.winner):null},clone:function(){var r=new u(this.activePlayer(),this.cardsHand.slice(0),this.cardsFoot.slice(0));return r.table=this.table.slice(0),r.winner=this.winner,r.result_parcial=this.result_parcial.slice(0),r},next:function(r,t,e){e||this.clone();var a,i=r[this.activePlayer()];if("Hand"===this.activePlayer())a=this.cardsHand[i],this.cardsHand.splice(i,1),this.mesa.push(a);else{switch(a=this.cardsFoot[i],this.cardsFoot.splice(i,1),this.mesa.push(a),cardsFoot.length){case 2:result_parcial[0]=this.mesa[0]>this.mesa[1]?1:-1;break;case 1:result_parcial[1]=this.mesa[2]>this.mesa[3]?1:-1;break;case 0:result_parcial[2]=this.mesa[4]>this.mesa[5]?1:-1}this.winner=this.partialWinner()}return activePlayer="Hand"===activePlayer?"Foot":"Hand",null},partialWinner:function(){if(1<result_parcial.length)if(2==result_parcial.length){if(result_parcial==[1,1]||result_parcial==[0,1]||result_parcial==[1,0])return"Hand";if(result_parcial==[-1,-1]||result_parcial==[0,-1]||result_parcial==[-1,0])return"Foot"}else{if(result_parcial==[1,-1,1]||result_parcial==[1,-1,0]||result_parcial==[0,0,0]||result_parcial==[0,0,1])return"Hand";if(result_parcial==[-1,1,-1]||result_parcial==[-1,1,0]||result_parcial==[0,0,-1])return"Foot"}return null},"static __SERMAT__":{identifier:l.__package__+".SubTruco",serializer:function(r){return[r.activePlayer()]}}});return l.__SERMAT__.include.push(u),e.include(l),e.include(l),l});
//# sourceMappingURL=ludorum-game-truco-tag.min.js.map