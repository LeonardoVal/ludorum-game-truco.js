//! ludorum-game-truco 0.0.1

(function(t){"use strict";this["ludorum-game-truco"]=t(this.base,this.Sermat,this.ludorum)}).call(this,function t(e,r,n){"use strict";var a=e.declare,i=(e.raise,e.raiseIf,e.Iterable,e.iterable,n.Game),l=(n.players.UserInterface,{__package__:"ludorum-game-truco",__name__:"ludorum_game_truco",__init__:t,__dependencies__:[e,r,n],__SERMAT__:{include:[e,n]},ai:{}});function s(t){for(var e=[],r=0;r<t.length;r++)e.push(r);return e}function c(t,e){if(t===e)return!0;if(null==t||null==e)return!1;if(t.length!=e.length)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}var u=l.Truco=a(i,{name:"Truco",constructor:function(t){i.call(this,t)},players:["Hand","Foot"],moves:function(){return null},result:function(){return null},next:function(t,e,r){return null},"static __SERMAT__":{identifier:l.__package__+".Truco",serializer:function(t){return[t.activePlayer()]}}});l.__SERMAT__.include.push(u),r.include(l);var o=l.ai.SubTruco=a(i,{name:"Truco",constructor:function(t,e,r){i.call(this,t),this.table=[],this.cardsHand=e,this.cardsFoot=r,this.winner=null,this.result_parcial=[]},players:["Hand","Foot"],moves:function(){if(this.result())return null;var t={};return"Hand"===this.activePlayer()?t[this.activePlayer()]=s(this.cardsHand):t[this.activePlayer()]=s(this.cardsFoot),t},result:function(){return this.winner?this.victory(this.winner):null},clone:function(){var t=new o(this.activePlayer(),this.cardsHand.slice(),this.cardsFoot.slice());return t.table=this.table.slice(),t.winner=this.winner,t.result_parcial=this.result_parcial.slice(),t},next:function(t,e,r){var n,a=r?this:this.clone(),i=t[this.activePlayer()];if("Hand"===a.activePlayer())n=a.cardsHand[i],a.cardsHand.splice(i,1),a.table.push(n);else{switch(n=a.cardsFoot[i],a.cardsFoot.splice(i,1),a.table.push(n),a.cardsFoot.length){case 2:a.result_parcial[0]=a.table[0]>a.table[1]?1:-1;break;case 1:a.result_parcial[1]=a.table[2]>a.table[3]?1:-1;break;case 0:a.result_parcial[2]=a.table[4]>a.table[5]?1:-1}a.winner=a.partialWinner()}var l="Hand"===a.activePlayer()?"Foot":"Hand";return a.activatePlayers(l),a},partialWinner:function(){var t=this.result_parcial;if(1<t.length)if(2==t.length){if(c(t,[1,1])||c(t,[0,1])||c(t,[1,0]))return console.log("Into A"),"Hand";if(c(t,[-1,-1])||c(t,[0,-1])||c(t,[-1,0]))return console.log("Into B"),"Foot"}else{if(c(t,[1,-1,1])||c(t,[1,-1,0])||c(t,[0,0,0])||c(t,[0,0,1])||c(t,[-1,1,1]))return console.log("Into C"),"Hand";if(c(t,[-1,1,-1])||c(t,[-1,1,0])||c(t,[0,0,-1]))return console.log("Into D"),"Foot"}return null},"static __SERMAT__":{identifier:l.__package__+".SubTruco",serializer:function(t){return[t.activePlayer()]}}});return l.__SERMAT__.include.push(o),r.include(l),r.include(l),l});
//# sourceMappingURL=ludorum-game-truco-tag.min.js.map